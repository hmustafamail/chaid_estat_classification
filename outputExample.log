-----------------------------------------------------------------------------------------
      name:  <unnamed>
       log:  C:\Users\Mustafa\Dropbox\Classes\2016 a spring classes\Independent Study\cha
> id_estat_classification\outputExample.log
  log type:  text
 opened on:   9 Mar 2016, 17:49:30

. 
. // Import data
. insheet using "SampleSet.csv"
(13 vars, 54 obs)

. 
. // Split up nummeds into quartiles
. egen nummedsquartile = cut(nummeds), at(1, 6, 11, 15, 29)

. 
. //******************************************************************************
. // Example of using ESTAT, the precedent for logit models.
. //******************************************************************************
. 
. // Create logistic model
. logistic acute vent drips nummedsquartile if mod(observation + 4, 9)

Logistic regression                               Number of obs   =         48
                                                  LR chi2(3)      =      26.55
                                                  Prob > chi2     =     0.0000
Log likelihood =  -19.82789                       Pseudo R2       =     0.4010

---------------------------------------------------------------------------------
          acute | Odds Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
           vent |   12.08054   15.15933     1.99   0.047     1.032646    141.3257
          drips |   2.212344   1.144865     1.53   0.125     .8023519     6.10015
nummedsquartile |   1.161343   .0972935     1.79   0.074     .9854839    1.368583
          _cons |   .0721588   .0713391    -2.66   0.008     .0103934    .5009816
---------------------------------------------------------------------------------

. 
. // Run on a sample set
. estat classification if mod(observation, 3)

Logistic model for acute

              -------- True --------
Classified |         D            ~D  |      Total
-----------+--------------------------+-----------
     +     |        18             1  |         19
     -     |         5            12  |         17
-----------+--------------------------+-----------
   Total   |        23            13  |         36

Classified + if predicted Pr(D) >= .5
True D defined as acute != 0
--------------------------------------------------
Sensitivity                     Pr( +| D)   78.26%
Specificity                     Pr( -|~D)   92.31%
Positive predictive value       Pr( D| +)   94.74%
Negative predictive value       Pr(~D| -)   70.59%
--------------------------------------------------
False + rate for true ~D        Pr( +|~D)    7.69%
False - rate for true D         Pr( -| D)   21.74%
False + rate for classified +   Pr(~D| +)    5.26%
False - rate for classified -   Pr( D| -)   29.41%
--------------------------------------------------
Correctly classified                        83.33%
--------------------------------------------------

. 
. //******************************************************************************
. // Example of using CHAIDESTAT, my analogous function for CHAID tree models.
. //******************************************************************************
. 
. // Create the decision tree
. quietly chaid acute, ordered(vent drips nummedsquartile) ///
>                         spltalpha(0.5) minnode(10) minsplit(10), ///
>                         if mod(observation + 2, 9), ///
>                         nodisp

. 
. // Get classification statistics on entire dataset
. chaid_estat_classification

NOTE:
 (1) Testing has been limited to examining a case of predicting one binary variable.
 (2) This function assumes the tree errs on the side of safety, preferring
        false positives if it is unsure.

Decision tree model for acute

           +------------ Actual ------+
Classified |         D            ~D  |      Total
-----------+--------------------------+-----------
     +     |        27             8  |         35
     -     |         4            15  |         19
-----------+--------------------------+-----------
   Total   |        31            23  |         54

Classified by tree
True D defined as acute != 0
--------------------------------------------------
Sensitivity                     Pr( +| D)   87.10%
Specificity                     Pr( -|~D)   65.22%
Positive predictive value       Pr( D| +)   77.14%
Negative predictive value       Pr(~D| -)   78.95%
--------------------------------------------------
False + rate for true ~D        Pr( +|~D)   34.78%
False - rate for true D         Pr( -| D)   12.90%
False + rate for classified +   Pr(~D| +)   22.86%
False - rate for classified -   Pr( D| -)   21.05%
--------------------------------------------------
Correctly classified                        77.78%
--------------------------------------------------

. 
. // Run on a subset of the data
. chaid_estat_classification if !mod(observation, 3)

NOTE:
 (1) Testing has been limited to examining a case of predicting one binary variable.
 (2) This function assumes the tree errs on the side of safety, preferring
        false positives if it is unsure.

Decision tree model for acute

           +------------ Actual ------+
Classified |         D            ~D  |      Total
-----------+--------------------------+-----------
     +     |         7             4  |         11
     -     |         1             6  |          7
-----------+--------------------------+-----------
   Total   |         8            10  |         18

Classified by tree
True D defined as acute != 0
--------------------------------------------------
Sensitivity                     Pr( +| D)   87.50%
Specificity                     Pr( -|~D)   60.00%
Positive predictive value       Pr( D| +)   63.64%
Negative predictive value       Pr(~D| -)   85.71%
--------------------------------------------------
False + rate for true ~D        Pr( +|~D)   40.00%
False - rate for true D         Pr( -| D)   12.50%
False + rate for classified +   Pr(~D| +)   36.36%
False - rate for classified -   Pr( D| -)   14.29%
--------------------------------------------------
Correctly classified                        72.22%
--------------------------------------------------

. 
. log close
      name:  <unnamed>
       log:  C:\Users\Mustafa\Dropbox\Classes\2016 a spring classes\Independent Study\cha
> id_estat_classification\outputExample.log
  log type:  text
 closed on:   9 Mar 2016, 17:49:31
-----------------------------------------------------------------------------------------
